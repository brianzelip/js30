<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- <link rel="stylesheet" href="https://npmcdn.com/basscss@7.1.1/css/basscss.min.css"> -->
    <title>Array Cardio üí™</title>
    <meta name="description" content="">
    <meta name="author" content="Brian Zelip">
    <meta name="keywords" content="">
  </head>

  <body>

    <p><em>Psst: have a look at the JavaScript Console</em> üíÅ</p>

    <script>
      // Get your shorts on - this is an array workout!
      // ## Array Cardio Day 1

      // Some data we can work with

      const inventors = [
        { first: 'Albert', last: 'Einstein', year: 1879, passed: 1955 },
        { first: 'Isaac', last: 'Newton', year: 1643, passed: 1727 },
        { first: 'Galileo', last: 'Galilei', year: 1564, passed: 1642 },
        { first: 'Marie', last: 'Curie', year: 1867, passed: 1934 },
        { first: 'Johannes', last: 'Kepler', year: 1571, passed: 1630 },
        { first: 'Nicolaus', last: 'Copernicus', year: 1473, passed: 1543 },
        { first: 'Max', last: 'Planck', year: 1858, passed: 1947 },
        { first: 'Katherine', last: 'Blodgett', year: 1898, passed: 1979 },
        { first: 'Ada', last: 'Lovelace', year: 1815, passed: 1852 },
        { first: 'Sarah E.', last: 'Goode', year: 1855, passed: 1905 },
        { first: 'Lise', last: 'Meitner', year: 1878, passed: 1968 },
        { first: 'Hanna', last: 'Hammarstr√∂m', year: 1829, passed: 1909 }
      ];

      const people = ['Becker, Carl', 'Beckett, Samuel', 'Beddoes, Mick', 'Berle, Milton', 'Beecher, Henry', 'Beethoven, Ludwig', 'Begin, Menachem', 'Belloc, Hilaire', 'Bellow, Saul', 'Benchley, Robert', 'Benenson, Peter', 'Ben-Gurion, David', 'Blake, William', 'Benjamin, Walter', 'Benn, Tony', 'Bennington, Chester', 'Benson, Leana', 'Bent, Silas', 'Bentsen, Lloyd', 'Berger, Ric', 'Bergman, Ingmar', 'Berio, Luciano','Beck, Glenn', 'Berlin, Irving', 'Berne, Eric', 'Bernhard, Sandra', 'Berra, Yogi', 'Berry, Halle', 'Berry, Wendell', 'Bethea, Erin', 'Bevan, Aneurin', 'Bevel, Ken', 'Biden, Joseph', 'Bierce, Ambrose', 'Biko, Steve', 'Billings, Josh', 'Biondo, Frank', 'Birrell, Augustine', 'Black, Elk', 'Blair, Robert', 'Blair, Tony'];

      // Array.prototype.filter()
      // 1. Filter the list of inventors for those who were born in the 1800's

        // see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter

        // 1.1. One way of doing it:
        // function filterBy1800s(array) {
        //   return array.year >= 1800 && array.year <= 1899;
        // }
        // console.table(inventors.filter(filterBy1800s));

        // 1.2. Another way to do it:
        // const from1800s = inventors.filter(filterBy1800s);
        // function filterBy1800s(array) {
        //   return array.year >= 1800 && array.year <= 1899;
        // }
        // console.table(from1800s);

        // 1.3. Another way to merge the function and variable into one line
        // const from1800s = inventors.filter(function(inventor){return inventor.year >= 1800 && inventor.year <= 1899});
        // console.table(from1800s);

        // 1.4. And finally the most efficient and ES6 way to do it:
        // const from1800s = inventors.filter(inventor => inventor.year >= 1800 && inventor.year <= 1899);
        // console.table(from1800s);

      // Array.prototype.map()
      // 2. Give us an array of the inventors' first and last names

        // see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map

        //Array.prototype.map() is like a for loop that goes thru every element in an array, does something to that element (the same thing/function to every element), then returns the result as an array; it's possible that the returned array.length() is equal to the original array.length(), but i'm not sure.


        // Here is the solution I came to first without looking at the tutorial:
        // const names = [];
        //
        // function fullNames(person) {
        //   // console.log(person + ': length = ' + person.length + ', comma char = ' + person.indexOf(','));
        //   // console.log(person + ': length = ' + person.length + ', comma char = ' + person.indexOf(','));
        //   // console.log(typeof(person));
        //   // console.log(person + ': first name = ' + person.slice(person.indexOf(',')+2) + '; last name = ' + person.slice(0, person.indexOf(',')));
        //
        //   console.log('names array is: ' + names);
        //   names.push(person.slice(person.indexOf(',')+2) + ' ' + person.slice(0, person.indexOf(',')));
        //   console.log('names array is now: ' + names);
        // }
        //
        // people.map(fullNames);

        // 2.R. REFERENCES
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push

        // Here is the tutorial's solution:
        // EDIT -- DOH!!! I used the `people` data NOT the `inventors`!!

        // tutorial solution's 1st iteration:
        // const fullNames = inventors.map(function(inventor){
        //   return inventor.first + ' ' + inventor.last;
        // });
        // console.log(fullNames);

        // tutorial solution's second iteration:
        // const fullNames = inventors.map(function(inventor){
        //   return `${inventor.first} ${inventor.last}`;
        // });
        // console.log(fullNames);

        // tutorial solution's third and most efficient ES6 iteration:
        // const fullNames = inventors.map(inventor => `${inventor.first} ${inventor.last}`);
        // console.log(fullNames);

      // Array.prototype.sort()
      // 3. Sort the inventors by birthdate, oldest to youngest

        // my first solution:
        // const oldestToYoungest = inventors.sort(function(a,b) {
        //   return a.year - b.year;
        // });
        // console.table(oldestToYoungest);

        // my ES6 iteration:
        // const oldestToYoungest = inventors.sort((a,b) => a.year - b.year);
        // console.table(oldestToYoungest);

        // 3.R. REFERENCES
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort
        //   - see especially the code example:
        //     ```js
        //     // sort by value
        //     items.sort(function (a, b) {
        //       return a.value - b.value;
        //     });
        //     ```
        //
        // NOTE that the video tutorial author provides a helpful description
        // of how Array.prototype.sort() works, and why the convention is to use
        //  `(a, b)` --> the reason is because sort() takes two elements and
        // compares one thing about each of them to eachother depending on
        // the present compareFunction. At first glance, it appears as if
        // array.prototype.reduce() behaves similarly...

        // The tutorial's solution (notice the unnecessary ternary operators (`?` and `:`)):
        // HOWEVER, the ternary op is unnecessary only when using `a-b`,
        // when using `a > b`, the ternary op is necessary. It might have something to do with
        // the values in this case being number types.

        // const ordered = inventors.sort((a,b) => a.year > b.year ? 1 : -1);
        // console.table(ordered);


      // Array.prototype.reduce()
      // 4. How many years did all the inventors live?

        // my first iteration:
        // const totalYears = inventors.reduce(function(tally, inventor) {
        //
        //   console.log('tally is: ' + tally);
        //   tally += (inventor.passed - inventor.year);
        //   console.log('tally is: ' + tally);
        //   return tally;
        // }, 0);
        // console.log(totalYears);

        // my second iteration:
        // const totalYears = inventors.reduce(function(tally, inventor) {
        //   return tally += (inventor.passed - inventor.year);
        // }, 0);
        // console.log(totalYears);

        // my third ES6 iteration:
        // const totalYears = inventors.reduce((tally, inventor) => {
        //   return tally += (inventor.passed - inventor.year)
        // }, 0);
        // console.log(totalYears);

        // NOTE the need for _EXPLICIT RETURN_ here since a block is needed as opposed to the solution for array.prototype.sort() above.
        // See this for insight, http://stackoverflow.com/q/28889450/2145103

        // 4.R. REFERENCES
        // - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce
        // - http://stackoverflow.com/q/28889450/2145103

        // The tutorial's solution:
        // const totalYears = inventors.reduce((total, inventor) => {
        //   return total + (inventor.passed - inventor.year);
        // }, 0);
        // console.log(totalYears);


      // 5. Sort the inventors by years lived

        // my first iteration:
        // const agedLongestToShortest = inventors.sort(function(a,b) {
        //   return ((b.passed - b.year) - (a.passed - a.year));
        // })
        // console.table(agedLongestToShortest);

        // my second ES6 iteration:
        // const agedLongestToShortest = inventors.sort((a,b) => ((b.passed-b.year)-(a.passed-a.year)));
        // console.table(agedLongestToShortest);

        // 5.R. REFERENCES
        // - no references consulted for this solution!

        // The tutorial's solution:
        // (NOTE the unnecessary use of the variables lastGuy and nextGuy, as
        // well as the unnecessary ternary operators)
        // const oldest = inventors.sort(function(a,b) {
        //   const lastGuy = a.passed - a.year;
        //   const nextGuy = b.passed - b.year;
        //   return lastGuy > nextGuy ? -1 : 1;
        // });
        // console.table(oldest);

      // 6. create a list of Boulevards in Paris that contain 'de' anywhere in the name
      // https://en.wikipedia.org/wiki/Category:Boulevards_in_Paris

        // The idea of this challenge is not to GET the html at the above URL, but rather
        // to go to the wikipedia page and complete the challenge by working in the console
        // at the page.

        // Here is the WP api call to get the JSON of the Boulevards_in_Paris category:
        // https://en.wikipedia.org/w/api.php?action=query&format=json&list=categorymembers&meta=&continue=-%7C%7C&cmtitle=Category%3ABoulevards+in+Paris&cmlimit=75

        // my first iteration using source data as NodeList instead of as array
        // const category = document.querySelector('.mw-category');
        // const blvds = category.querySelectorAll('a');// notice you can throw `querySelectorAll` on a variable, not just the document or body, etc!
        //
        // const de = [];
        //
        // blvds.forEach(function(a) {
        //   // console.log(a.innerHTML);
        //   if (a.innerHTML.includes('de') || a.innerHTML.includes('De')) {
        //     de.push(a.innerHTML);
        //   };
        // });
        // console.log(de);

        // The tutorial solution's first iteration:
        // const category = document.querySelector('.mw-category');
        // const links = Array.from(category.querySelectorAll('a'));
        //
        // const de = links.map(function(link) {
        //   return link.innerHTML;
        // }).filter(function(text) {
        //   return (text.includes('de') || text.includes('De'))
        // })
        //
        // console.log(de);

        // The tutorial solution's second iteration:
        // const category = document.querySelector('.mw-category');
        // const links = [...category.querySelectorAll('a')];//create array of all iterable items in the NodeList using ES6 spread operator instead of using `Array.from(NodeList)`
        // const de = links.map(link => link.innerHTML).filter(link => (link.includes('de') || link.includes('De')));
        // console.log(de);

        // The tutorial solution's final iteration that improves readability:
        // const links = [...document.querySelectorAll('.mw-category a')];
        // const de = links
        //             .map(link => link.textContent)//notice textContent vs. innerHTML
        //             .filter(text => (text.includes('de') || text.includes('De')))
        // console.log(de);

        // 6.R. REFERENCES
        // - WP page, https://en.wikipedia.org/wiki/Category:Boulevards_in_Paris
        // - WP api for getting a category, https://www.mediawiki.org/wiki/API:Categories
        // - WP api sandbox example for getting category members (different than getting categories like above), https://www.mediawiki.org/wiki/API:Categorymembers
        // - NodeList.forEach(), https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach
        // - string.prototype.includes(), https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes
        // - innerHTML vs textContent, http://stackoverflow.com/a/24428100/2145103

        // Here was the beginning of my trying to GET the wikipedia JSON:

        // function reqListener () {
        //   console.log(this.responseText);
        // }
        //
        // var oReq = new XMLHttpRequest();
        // oReq.addEventListener("load", reqListener);
        // oReq.open("GET", "https://en.wikipedia.org/wiki/Category:Boulevards_in_Paris");
        // oReq.send();


      // 7. sort Exercise
      // Sort the people alphabetically by last name

        // My first iteration:
        // const sorted = people.sort((a,b) => b < a);
        // console.log(sorted);
        // using subtraction sign (`-`) doesn't work, perhaps because b and a are strings not numbers?

        // my second iteration:
        // const sorted = people.sort(function(a,b) {
        //   // console.log('a is ' + a + ' and b is ' + b);
        //   // const [aLast,aFirst] = a.split(', ');
        //   // const [bLast,bFirst] = b.split(', ');
        //   // console.log(bFirst + ' ' + bLast);
        //   if (b < a) {
        //     return 1
        //   } else {
        //     return -1
        //   };
        //   // console.log(lastOne);
        // })
        // console.log(sorted);
        // NOTE the data source for this excercise lends itself well to just sorting on the string values
        // since the last name comes first in each string. Because of this my initial solution above
        // satisfies the challenge. However, if each element of people started with first name, then
        // the solution would have to invole using string.split() in the tutorial's solution above
        // (which are commented out).
        // Even the tutorial returned only the same strings elements from the original people array, not
        // an array of arrays.

      // 8. Reduce Exercise
      // Sum up the instances of each of these
      const data = ['car', 'car', 'truck', 'truck', 'bike', 'walk', 'car', 'van', 'bike', 'walk', 'car', 'van', 'car', 'truck' ];

        // My first iteration
        // const summary = data.reduce(function(tally, category) {
        //   // console.log(tally, category):
        //   if (!tally[category]) {
        //     tally[category] = 1
        //   } else {
        //     tally[category] += 1
        //   }
        //   // console.log(tally, category);
        //   return tally;
        // }, {})
        //
        // console.log(summary);

        // my second ES6 iteration:
        const sumInstances = data.reduce((tally, category) => {
          !tally[category] ? tally[category] = 1 : tally[category] += 1
          return tally
        }, {})
        console.log(sumInstances);

        // AWESOME! Solved this one without watching the tutorial at all. I figured it out by watching
        // the FUN FUN FUNCTION vids listed below (larned about this !yt channel from NodeUp podcast #112).
        // The key to my grasping how to use array.reduce() is:
          // 1. the first argument is what !mdn calls the accumulator, but is really like what the ultimate
          // result will be. AND, this can be any kind of object, including a number or an object! It is the
          // name for what is passed AFTER the function, ie the `initialValue`. If no initialValue then
          // the accumulator will not have a value until AFTER the first iteration.
          // 2. To get reduce() working even just for testing purpose, it needs to have a RETURN statement!

        // 8.R REFERENCES
        // - array.reduce(),  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce
        // - FUN FUN FUNCTION vid 1 on array.reduce(), https://www.youtube.com/watch?v=Wl98eZpkp-c
        // - FUN FUN FUNCTION vid 2 on array.reduce(), https://www.youtube.com/watch?v=1DMolJ2FrNY

    </script>

  </body>

</html>
